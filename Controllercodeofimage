[HttpGet]
    public IActionResult GetAllImages()
    {
        var images = _database.GetImages();
        return Ok(images);
    }

    // ------------------------------------------------------
    // GET images by VehicleId
    // ------------------------------------------------------
    [HttpGet("vehicle/{vehicleId}")]
    public IActionResult GetImagesByVehicleId(int vehicleId)
    {
        var images = _database.GetImagesByVehicleId(vehicleId);
        return Ok(images);
    }

    // ------------------------------------------------------
    // POST add new image (byte[] from body)
    // ------------------------------------------------------
    [HttpPost]
    public IActionResult InsertImage([FromBody] ImageClass image)
    {
        if (image == null)
            return BadRequest("Image data is required.");

        _database.InsertVehicleImage(image);
        return Ok("Image inserted successfully.");
    }
//the query related to images vehicle 
//this query related to images 
        public List<ImageClass> GetImages()
{
    var images = new List<ImageClass>();

    using (SqlConnection conn = new SqlConnection(_connectionString))
    {
        conn.Open();
        string query = "SELECT * FROM VehicleImages";

        using (SqlCommand cmd = new SqlCommand(query, conn))
        using (SqlDataReader reader = cmd.ExecuteReader())
        {
            while (reader.Read())
            {
                var image = new ImageClass
                {
                    ImageId = Convert.ToInt32(reader["ImageId"]),
                    VehicleId = Convert.ToInt32(reader["VehicleId"]),
                    ImageUrl = reader["ImageUrl"] as byte[],
                    VehicleName = reader["VehicleName"].ToString()
                };

                images.Add(image); // <-- you forgot this
            }
        }
    }

    return images;
}

public void InsertVehicleImage(ImageClass image)
{
    using (SqlConnection conn = new SqlConnection(_connectionString))
    {
        conn.Open();
        string query = @"INSERT INTO VehicleImages (VehicleId, ImageUrl, VehicleName)
                         VALUES (@VehicleId, @ImageUrl, @VehicleName)";

        using (SqlCommand cmd = new SqlCommand(query, conn))
        {
            cmd.Parameters.AddWithValue("@VehicleId", image.VehicleId);
            cmd.Parameters.AddWithValue("@ImageUrl", image.ImageUrl); // byte[]
            cmd.Parameters.AddWithValue("@VehicleName", image.VehicleName);

            cmd.ExecuteNonQuery();
        }
    }
}
public List<ImageClass> GetImagesByVehicleId(int vehicleId)
{
    var images = new List<ImageClass>();

    using (SqlConnection conn = new SqlConnection(_connectionString))
    {
        conn.Open();
        string query = "SELECT * FROM VehicleImages WHERE VehicleId = @VehicleId";

        using (SqlCommand cmd = new SqlCommand(query, conn))
        {
            cmd.Parameters.AddWithValue("@VehicleId", vehicleId);

            using (SqlDataReader reader = cmd.ExecuteReader())
            {
                while (reader.Read())
                {
                    images.Add(new ImageClass
                    {
                        ImageId = Convert.ToInt32(reader["ImageId"]),
                        VehicleId = Convert.ToInt32(reader["VehicleId"]),
                        ImageUrl = reader["ImageUrl"] as byte[],
                        VehicleName = reader["VehicleName"].ToString()
                    });
                }
            }
        }
    }

    return images;
}
